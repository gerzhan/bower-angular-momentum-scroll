"use strict";angular.module("angular-momentum-scroll",[]),angular.module("angular-momentum-scroll").directive("scrollable",["$timeout","$window","$document",function(e,r,n){return{restrict:"AE",scope:{scrollToPageTime:"@",currPageX:"=",currPageY:"=",currY:"=",currX:"=",isMaxX:"=",isMinX:"=",isMaxY:"=",isMinY:"=",onRefresh:"&",onBeforeScrollStart:"&",onScrollStart:"&",onBeforeScrollMove:"&",onScrollMove:"&",parameters:"@",onBeforeScrollEnd:"&",onScrollEnd:"&",onTouchEnd:"&",onDestroy:"&",onZoomStart:"&",onZoom:"&",onZoomEnd:"&"},transclude:!0,template:'<div class="scroller" ng-transclude></div>',link:function(i,l,a){var o=".inline-flex {  display: -webkit-inline-flex;  display: -moz-inline-flex;  display: -ms-inline-flexbox;  display: -ms-inline-flex;  display: inline-flex;  display: -webkit-inline-box;  overflow: hidden;  white-space: nowrap;}.inline-flex > * {  display: block;}",s=angular.element(n[0].head);s.append('<style type="text/css">'+o+"</style>"),a.$observe("parameters",function(n){var a={};i.iscrollParameters="string"==typeof n?angular.fromJson(n):n,i.hScroll="hScroll"in i.iscrollParameters&&i.iscrollParameters.hScroll;for(var o in i)-1!==o.indexOf("on")&&i.hasOwnProperty(o)&&angular.isFunction(i[o])&&(i.iscrollParameters[o]=i[o]);if(l.css("overflow","auto"),l.css("position","relative"),i.hScroll){var s=angular.element(l.children(".scroller")[0]);s.addClass("inline-flex")}if(angular.isDefined(i.iscrollParameters)){var c=new iScroll(l[0],i.iscrollParameters);c.options.onScrollEnd=function(){e(function(){angular.isDefined(i.currPageY)&&(i.currPageY=c.currPageY),angular.isDefined(i.currPageX)&&(i.currPageX=c.currPageX),angular.isDefined(i.currY)&&(i.currY=c.y),angular.isDefined(i.currX)&&(i.currX=c.x),angular.isDefined(i.isMaxY)&&(i.isMaxY=c.y<=c.maxScrollY),angular.isDefined(i.isMinY)&&(i.isMinY=c.y>=c.minScrollY),angular.isDefined(i.isMaxX)&&(i.isMaxX=c.x>=c.maxScrollX),angular.isDefined(i.isMinX)&&(i.isMinX=c.x<=c.minScrollX)}),i.onScrollEnd({pageX:this.currPageX,pageY:this.currPageY,X:this.currX,Y:this.currY})},i.$watch("currPageY",function(e){0!==c.pagesY.length&&angular.isDefined(e)&&c.scrollToPage(0,e,i.scrollToPageTime)}),i.$watch("currPageX",function(e){0!==c.pagesX.length&&angular.isDefined(e)&&c.scrollToPage(e,0,i.scrollToPageTime)}),i.$watch("currY",function(e){angular.isDefined(e)&&c.scrollTo(0,e,i.scrollToPageTime)}),i.$watch("currX",function(e){angular.isDefined(e)&&c.scrollTo(e,0,i.scrollToPageTime)}),i.$watch(function(){c.refresh()});var t="onorientationchange"in r,u=t?"orientationchange":"resize";r.addEventListener(u,function(){(a.width!==screen.width||a.height!==screen.height)&&(a={width:screen.width,height:screen.height},c.refresh())},!1),l.bind("$destroy",function(){c.destroy(),c=null})}})}}}]);