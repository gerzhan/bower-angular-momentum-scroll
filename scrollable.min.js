(function(o,r){function e(o){return""===n?o:(o=o.charAt(0).toUpperCase()+o.substr(1),n+o)}var t=Math,l=r.createElement("div").style,n=function(){for(var o,r="t,webkitT,MozT,msT,OT".split(","),e=0,t=r.length;t>e;e++)if(o=r[e]+"ransform",o in l)return r[e].substr(0,r[e].length-1);return!1}(),i=n?"-"+n.toLowerCase()+"-":"",s=e("transform"),a=e("transitionProperty"),c=e("transitionDuration"),p=e("transformOrigin"),u=e("transitionTimingFunction"),m=e("transitionDelay"),h=/android/gi.test(navigator.appVersion),d=/iphone|ipad/gi.test(navigator.appVersion),S=/hp-tablet/gi.test(navigator.appVersion),f=e("perspective")in l,b="ontouchstart"in o&&!S,g=n!==!1,x=e("transition")in l,v="onorientationchange"in o?"orientationchange":"resize",y=b?"touchstart":"mousedown",Y=b?"touchmove":"mousemove",T=b?"touchend":"mouseup",X=b?"touchcancel":"mouseup",w=function(){if(n===!1)return!1;var o={"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"};return o[n]}(),_=function(){return o.requestAnimationFrame||o.webkitRequestAnimationFrame||o.mozRequestAnimationFrame||o.oRequestAnimationFrame||o.msRequestAnimationFrame||function(o){return setTimeout(o,1)}}(),z=function(){return o.cancelRequestAnimationFrame||o.webkitCancelAnimationFrame||o.webkitCancelRequestAnimationFrame||o.mozCancelRequestAnimationFrame||o.oCancelRequestAnimationFrame||o.msCancelRequestAnimationFrame||clearTimeout}(),M=f?" translateZ(0)":"",P=function(e,t){var l,n=this;n.wrapper="object"==typeof e?e:r.getElementById(e),n.wrapper.style.overflow="hidden",n.scroller=n.wrapper.children[0],n.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,handleClick:!0,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:h,hideScrollbar:d,fadeScrollbar:d&&f,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(o){o.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(l in t)n.options[l]=t[l];n.x=n.options.x,n.y=n.options.y,n.options.useTransform=g&&n.options.useTransform,n.options.hScrollbar=n.options.hScroll&&n.options.hScrollbar,n.options.vScrollbar=n.options.vScroll&&n.options.vScrollbar,n.options.zoom=n.options.useTransform&&n.options.zoom,n.options.useTransition=x&&n.options.useTransition,n.options.zoom&&h&&(M=""),n.scroller.style[a]=n.options.useTransform?i+"transform":"top left",n.scroller.style[c]="0",n.scroller.style[p]="0 0",n.options.useTransition&&(n.scroller.style[u]="cubic-bezier(0.33,0.66,0.66,1)"),n.options.useTransform?n.scroller.style[s]="translate("+n.x+"px,"+n.y+"px)"+M:n.scroller.style.cssText+=";position:absolute;top:"+n.y+"px;left:"+n.x+"px",n.options.useTransition&&(n.options.fixedScrollbar=!0),n.refresh(),n._bind(v,o),n._bind(y),b||"none"!=n.options.wheelAction&&(n._bind("DOMMouseScroll"),n._bind("mousewheel")),n.options.checkDOMChanges&&(n.checkDOMTime=setInterval(function(){n._checkDOMChanges()},500))};P.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(o){var r=this;switch(o.type){case y:if(!b&&0!==o.button)return;r._start(o);break;case Y:r._move(o);break;case T:case X:r._end(o);break;case v:r._resize();break;case"DOMMouseScroll":case"mousewheel":r._wheel(o);break;case w:r._transitionEnd(o)}},_checkDOMChanges:function(){this.moved||this.zoomed||this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale||this.refresh()},_scrollbar:function(o){var e,l=this;return l[o+"Scrollbar"]?(l[o+"ScrollbarWrapper"]||(e=r.createElement("div"),l.options.scrollbarClass?e.className=l.options.scrollbarClass+o.toUpperCase():e.style.cssText="position:absolute;z-index:100;"+("h"==o?"height:7px;bottom:1px;left:2px;right:"+(l.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(l.hScrollbar?"7":"2")+"px;top:2px;right:1px"),e.style.cssText+=";pointer-events:none;"+i+"transition-property:opacity;"+i+"transition-duration:"+(l.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(l.options.hideScrollbar?"0":"1"),l.wrapper.appendChild(e),l[o+"ScrollbarWrapper"]=e,e=r.createElement("div"),l.options.scrollbarClass||(e.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+i+"background-clip:padding-box;"+i+"box-sizing:border-box;"+("h"==o?"height:100%":"width:100%")+";"+i+"border-radius:3px;border-radius:3px"),e.style.cssText+=";pointer-events:none;"+i+"transition-property:"+i+"transform;"+i+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+i+"transition-duration:0;"+i+"transform: translate(0,0)"+M,l.options.useTransition&&(e.style.cssText+=";"+i+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"),l[o+"ScrollbarWrapper"].appendChild(e),l[o+"ScrollbarIndicator"]=e),"h"==o?(l.hScrollbarSize=l.hScrollbarWrapper.clientWidth,l.hScrollbarIndicatorSize=t.max(t.round(l.hScrollbarSize*l.hScrollbarSize/l.scrollerW),8),l.hScrollbarIndicator.style.width=l.hScrollbarIndicatorSize+"px",l.hScrollbarMaxScroll=l.hScrollbarSize-l.hScrollbarIndicatorSize,l.hScrollbarProp=l.hScrollbarMaxScroll/l.maxScrollX):(l.vScrollbarSize=l.vScrollbarWrapper.clientHeight,l.vScrollbarIndicatorSize=t.max(t.round(l.vScrollbarSize*l.vScrollbarSize/l.scrollerH),8),l.vScrollbarIndicator.style.height=l.vScrollbarIndicatorSize+"px",l.vScrollbarMaxScroll=l.vScrollbarSize-l.vScrollbarIndicatorSize,l.vScrollbarProp=l.vScrollbarMaxScroll/l.maxScrollY),l._scrollbarPos(o,!0),void 0):(l[o+"ScrollbarWrapper"]&&(g&&(l[o+"ScrollbarIndicator"].style[s]=""),l[o+"ScrollbarWrapper"].parentNode.removeChild(l[o+"ScrollbarWrapper"]),l[o+"ScrollbarWrapper"]=null,l[o+"ScrollbarIndicator"]=null),void 0)},_resize:function(){var o=this;setTimeout(function(){o.refresh()},h?200:0)},_pos:function(o,r){this.zoomed||(o=this.hScroll?o:0,r=this.vScroll?r:0,this.options.useTransform?this.scroller.style[s]="translate("+o+"px,"+r+"px) scale("+this.scale+")"+M:(o=t.round(o),r=t.round(r),this.scroller.style.left=o+"px",this.scroller.style.top=r+"px"),this.x=o,this.y=r,this._scrollbarPos("h"),this._scrollbarPos("v"))},_scrollbarPos:function(o,r){var e,l=this,n="h"==o?l.x:l.y;l[o+"Scrollbar"]&&(n=l[o+"ScrollbarProp"]*n,0>n?(l.options.fixedScrollbar||(e=l[o+"ScrollbarIndicatorSize"]+t.round(3*n),8>e&&(e=8),l[o+"ScrollbarIndicator"].style["h"==o?"width":"height"]=e+"px"),n=0):n>l[o+"ScrollbarMaxScroll"]&&(l.options.fixedScrollbar?n=l[o+"ScrollbarMaxScroll"]:(e=l[o+"ScrollbarIndicatorSize"]-t.round(3*(n-l[o+"ScrollbarMaxScroll"])),8>e&&(e=8),l[o+"ScrollbarIndicator"].style["h"==o?"width":"height"]=e+"px",n=l[o+"ScrollbarMaxScroll"]+(l[o+"ScrollbarIndicatorSize"]-e))),l[o+"ScrollbarWrapper"].style[m]="0",l[o+"ScrollbarWrapper"].style.opacity=r&&l.options.hideScrollbar?"0":"1",l[o+"ScrollbarIndicator"].style[s]="translate("+("h"==o?n+"px,0)":"0,"+n+"px)")+M)},_start:function(r){var e,l,n,i,a,c=this,p=b?r.touches[0]:r;c.enabled&&(c.options.onBeforeScrollStart&&c.options.onBeforeScrollStart.call(c,r),(c.options.useTransition||c.options.zoom)&&c._transitionTime(0),c.moved=!1,c.animating=!1,c.zoomed=!1,c.distX=0,c.distY=0,c.absDistX=0,c.absDistY=0,c.dirX=0,c.dirY=0,c.options.zoom&&b&&r.touches.length>1&&(i=t.abs(r.touches[0].pageX-r.touches[1].pageX),a=t.abs(r.touches[0].pageY-r.touches[1].pageY),c.touchesDistStart=t.sqrt(i*i+a*a),c.originX=t.abs(r.touches[0].pageX+r.touches[1].pageX-2*c.wrapperOffsetLeft)/2-c.x,c.originY=t.abs(r.touches[0].pageY+r.touches[1].pageY-2*c.wrapperOffsetTop)/2-c.y,c.options.onZoomStart&&c.options.onZoomStart.call(c,r)),c.options.momentum&&(c.options.useTransform?(e=getComputedStyle(c.scroller,null)[s].replace(/[^0-9\-.,]/g,"").split(","),l=+(e[12]||e[4]),n=+(e[13]||e[5])):(l=+getComputedStyle(c.scroller,null).left.replace(/[^0-9-]/g,""),n=+getComputedStyle(c.scroller,null).top.replace(/[^0-9-]/g,"")),(l!=c.x||n!=c.y)&&(c.options.useTransition?c._unbind(w):z(c.aniTime),c.steps=[],c._pos(l,n),c.options.onScrollEnd&&c.options.onScrollEnd.call(c))),c.absStartX=c.x,c.absStartY=c.y,c.startX=c.x,c.startY=c.y,c.pointX=p.pageX,c.pointY=p.pageY,c.startTime=r.timeStamp||Date.now(),c.options.onScrollStart&&c.options.onScrollStart.call(c,r),c._bind(Y,o),c._bind(T,o),c._bind(X,o))},_move:function(o){var r,e,l,n=this,i=b?o.touches[0]:o,a=i.pageX-n.pointX,c=i.pageY-n.pointY,p=n.x+a,u=n.y+c,m=o.timeStamp||Date.now();return n.options.onBeforeScrollMove&&n.options.onBeforeScrollMove.call(n,o),n.options.zoom&&b&&o.touches.length>1?(r=t.abs(o.touches[0].pageX-o.touches[1].pageX),e=t.abs(o.touches[0].pageY-o.touches[1].pageY),n.touchesDist=t.sqrt(r*r+e*e),n.zoomed=!0,l=1/n.touchesDistStart*n.touchesDist*this.scale,n.options.zoomMin>l?l=.5*n.options.zoomMin*Math.pow(2,l/n.options.zoomMin):l>n.options.zoomMax&&(l=2*n.options.zoomMax*Math.pow(.5,n.options.zoomMax/l)),n.lastScale=l/this.scale,p=this.originX-this.originX*n.lastScale+this.x,u=this.originY-this.originY*n.lastScale+this.y,this.scroller.style[s]="translate("+p+"px,"+u+"px) scale("+l+")"+M,n.options.onZoom&&n.options.onZoom.call(n,o),void 0):(n.pointX=i.pageX,n.pointY=i.pageY,(p>0||n.maxScrollX>p)&&(p=n.options.bounce?n.x+a/2:p>=0||n.maxScrollX>=0?0:n.maxScrollX),(u>n.minScrollY||n.maxScrollY>u)&&(u=n.options.bounce?n.y+c/2:u>=n.minScrollY||n.maxScrollY>=0?n.minScrollY:n.maxScrollY),n.distX+=a,n.distY+=c,n.absDistX=t.abs(n.distX),n.absDistY=t.abs(n.distY),6>n.absDistX&&6>n.absDistY||(n.options.lockDirection&&(n.absDistX>n.absDistY+5?(u=n.y,c=0):n.absDistY>n.absDistX+5&&(p=n.x,a=0)),n.moved=!0,n._pos(p,u),n.dirX=a>0?-1:0>a?1:0,n.dirY=c>0?-1:0>c?1:0,m-n.startTime>300&&(n.startTime=m,n.startX=n.x,n.startY=n.y),n.options.onScrollMove&&n.options.onScrollMove.call(n,o)),void 0)},_end:function(e){if(!b||0===e.touches.length){var l,n,i,a,p,u,m,h=this,d=b?e.changedTouches[0]:e,S={dist:0,time:0},f={dist:0,time:0},g=(e.timeStamp||Date.now())-h.startTime,x=h.x,v=h.y;if(h._unbind(Y,o),h._unbind(T,o),h._unbind(X,o),h.options.onBeforeScrollEnd&&h.options.onBeforeScrollEnd.call(h,e),h.zoomed)return m=h.scale*h.lastScale,m=Math.max(h.options.zoomMin,m),m=Math.min(h.options.zoomMax,m),h.lastScale=m/h.scale,h.scale=m,h.x=h.originX-h.originX*h.lastScale+h.x,h.y=h.originY-h.originY*h.lastScale+h.y,h.scroller.style[c]="200ms",h.scroller.style[s]="translate("+h.x+"px,"+h.y+"px) scale("+h.scale+")"+M,h.zoomed=!1,h.refresh(),h.options.onZoomEnd&&h.options.onZoomEnd.call(h,e),void 0;if(!h.moved)return b&&(h.doubleTapTimer&&h.options.zoom?(clearTimeout(h.doubleTapTimer),h.doubleTapTimer=null,h.options.onZoomStart&&h.options.onZoomStart.call(h,e),h.zoom(h.pointX,h.pointY,1==h.scale?h.options.doubleTapZoom:1),h.options.onZoomEnd&&setTimeout(function(){h.options.onZoomEnd.call(h,e)},200)):this.options.handleClick&&(h.doubleTapTimer=setTimeout(function(){for(h.doubleTapTimer=null,l=d.target;1!=l.nodeType;)l=l.parentNode;"SELECT"!=l.tagName&&"INPUT"!=l.tagName&&"TEXTAREA"!=l.tagName&&(n=r.createEvent("MouseEvents"),n.initMouseEvent("click",!0,!0,e.view,1,d.screenX,d.screenY,d.clientX,d.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null),n._fake=!0,l.dispatchEvent(n))},h.options.zoom?250:0))),h._resetPos(400),h.options.onTouchEnd&&h.options.onTouchEnd.call(h,e),void 0;if(300>g&&h.options.momentum&&(S=x?h._momentum(x-h.startX,g,-h.x,h.scrollerW-h.wrapperW+h.x,h.options.bounce?h.wrapperW:0):S,f=v?h._momentum(v-h.startY,g,-h.y,0>h.maxScrollY?h.scrollerH-h.wrapperH+h.y-h.minScrollY:0,h.options.bounce?h.wrapperH:0):f,x=h.x+S.dist,v=h.y+f.dist,(h.x>0&&x>0||h.x<h.maxScrollX&&h.maxScrollX>x)&&(S={dist:0,time:0}),(h.y>h.minScrollY&&v>h.minScrollY||h.y<h.maxScrollY&&h.maxScrollY>v)&&(f={dist:0,time:0})),S.dist||f.dist)return p=t.max(t.max(S.time,f.time),10),h.options.snap&&(i=x-h.absStartX,a=v-h.absStartY,t.abs(i)<h.options.snapThreshold&&t.abs(a)<h.options.snapThreshold?h.scrollTo(h.absStartX,h.absStartY,200):(u=h._snap(x,v),x=u.x,v=u.y,p=t.max(u.time,p))),h.scrollTo(t.round(x),t.round(v),p),h.options.onTouchEnd&&h.options.onTouchEnd.call(h,e),void 0;if(h.options.snap)return i=x-h.absStartX,a=v-h.absStartY,t.abs(i)<h.options.snapThreshold&&t.abs(a)<h.options.snapThreshold?h.scrollTo(h.absStartX,h.absStartY,200):(u=h._snap(h.x,h.y),(u.x!=h.x||u.y!=h.y)&&h.scrollTo(u.x,u.y,u.time)),h.options.onTouchEnd&&h.options.onTouchEnd.call(h,e),void 0;h._resetPos(200),h.options.onTouchEnd&&h.options.onTouchEnd.call(h,e)}},_resetPos:function(o){var r=this,e=r.x>=0?0:r.x<r.maxScrollX?r.maxScrollX:r.x,t=r.y>=r.minScrollY||r.maxScrollY>0?r.minScrollY:r.y<r.maxScrollY?r.maxScrollY:r.y;return e==r.x&&t==r.y?(r.moved&&(r.moved=!1,r.options.onScrollEnd&&r.options.onScrollEnd.call(r)),r.hScrollbar&&r.options.hideScrollbar&&("webkit"==n&&(r.hScrollbarWrapper.style[m]="300ms"),r.hScrollbarWrapper.style.opacity="0"),r.vScrollbar&&r.options.hideScrollbar&&("webkit"==n&&(r.vScrollbarWrapper.style[m]="300ms"),r.vScrollbarWrapper.style.opacity="0"),void 0):(r.scrollTo(e,t,o||0),void 0)},_wheel:function(o){var r,e,t,l,n,i=this;if("wheelDeltaX"in o)r=o.wheelDeltaX/12,e=o.wheelDeltaY/12;else if("wheelDelta"in o)r=e=o.wheelDelta/12;else{if(!("detail"in o))return;r=e=3*-o.detail}return"zoom"==i.options.wheelAction?(n=i.scale*Math.pow(2,1/3*(e?e/Math.abs(e):0)),i.options.zoomMin>n&&(n=i.options.zoomMin),n>i.options.zoomMax&&(n=i.options.zoomMax),n!=i.scale&&(!i.wheelZoomCount&&i.options.onZoomStart&&i.options.onZoomStart.call(i,o),i.wheelZoomCount++,i.zoom(o.pageX,o.pageY,n,400),setTimeout(function(){i.wheelZoomCount--,!i.wheelZoomCount&&i.options.onZoomEnd&&i.options.onZoomEnd.call(i,o)},400)),void 0):(t=i.x+r,l=i.y+e,t>0?t=0:i.maxScrollX>t&&(t=i.maxScrollX),l>i.minScrollY?l=i.minScrollY:i.maxScrollY>l&&(l=i.maxScrollY),0>i.maxScrollY&&i.scrollTo(t,l,0),void 0)},_transitionEnd:function(o){var r=this;o.target==r.scroller&&(r._unbind(w),r._startAni())},_startAni:function(){var o,r,e,l=this,n=l.x,i=l.y,s=Date.now();if(!l.animating){if(!l.steps.length)return l._resetPos(400),void 0;if(o=l.steps.shift(),o.x==n&&o.y==i&&(o.time=0),l.animating=!0,l.moved=!0,l.options.useTransition)return l._transitionTime(o.time),l._pos(o.x,o.y),l.animating=!1,o.time?l._bind(w):l._resetPos(0),void 0;e=function(){var a,c,p=Date.now();return p>=s+o.time?(l._pos(o.x,o.y),l.animating=!1,l.options.onAnimationEnd&&l.options.onAnimationEnd.call(l),l._startAni(),void 0):(p=(p-s)/o.time-1,r=t.sqrt(1-p*p),a=(o.x-n)*r+n,c=(o.y-i)*r+i,l._pos(a,c),l.animating&&(l.aniTime=_(e)),void 0)},e()}},_transitionTime:function(o){o+="ms",this.scroller.style[c]=o,this.hScrollbar&&(this.hScrollbarIndicator.style[c]=o),this.vScrollbar&&(this.vScrollbarIndicator.style[c]=o)},_momentum:function(o,r,e,l,n){var i=6e-4,s=t.abs(o)/r,a=s*s/(2*i),c=0,p=0;return o>0&&a>e?(p=n/(6/(a/s*i)),e+=p,s=s*e/a,a=e):0>o&&a>l&&(p=n/(6/(a/s*i)),l+=p,s=s*l/a,a=l),a*=0>o?-1:1,c=s/i,{dist:a,time:t.round(c)}},_offset:function(o){for(var r=-o.offsetLeft,e=-o.offsetTop;o=o.offsetParent;)r-=o.offsetLeft,e-=o.offsetTop;return o!=this.wrapper&&(r*=this.scale,e*=this.scale),{left:r,top:e}},_snap:function(o,r){var e,l,n,i,s,a,c=this;for(n=c.pagesX.length-1,e=0,l=c.pagesX.length;l>e;e++)if(o>=c.pagesX[e]){n=e;break}for(n==c.currPageX&&n>0&&0>c.dirX&&n--,o=c.pagesX[n],s=t.abs(o-c.pagesX[c.currPageX]),s=s?500*(t.abs(c.x-o)/s):0,c.currPageX=n,n=c.pagesY.length-1,e=0;n>e;e++)if(r>=c.pagesY[e]){n=e;break}return n==c.currPageY&&n>0&&0>c.dirY&&n--,r=c.pagesY[n],a=t.abs(r-c.pagesY[c.currPageY]),a=a?500*(t.abs(c.y-r)/a):0,c.currPageY=n,i=t.round(t.max(s,a))||200,{x:o,y:r,time:i}},_bind:function(o,r,e){(r||this.scroller).addEventListener(o,this,!!e)},_unbind:function(o,r,e){(r||this.scroller).removeEventListener(o,this,!!e)},destroy:function(){var r=this;r.scroller.style[s]="",r.hScrollbar=!1,r.vScrollbar=!1,r._scrollbar("h"),r._scrollbar("v"),r._unbind(v,o),r._unbind(y),r._unbind(Y,o),r._unbind(T,o),r._unbind(X,o),r.options.hasTouch||(r._unbind("DOMMouseScroll"),r._unbind("mousewheel")),r.options.useTransition&&r._unbind(w),r.options.checkDOMChanges&&clearInterval(r.checkDOMTime),r.options.onDestroy&&r.options.onDestroy.call(r)},refresh:function(){var o,r,e,l,n=this,i=0,s=0;if(n.scale<n.options.zoomMin&&(n.scale=n.options.zoomMin),n.wrapperW=n.wrapper.clientWidth||1,n.wrapperH=n.wrapper.clientHeight||1,n.minScrollY=-n.options.topOffset||0,n.scrollerW=t.round(n.scroller.offsetWidth*n.scale),n.scrollerH=t.round((n.scroller.offsetHeight+n.minScrollY)*n.scale),n.maxScrollX=n.wrapperW-n.scrollerW,n.maxScrollY=n.wrapperH-n.scrollerH+n.minScrollY,n.dirX=0,n.dirY=0,n.options.onRefresh&&n.options.onRefresh.call(n),n.hScroll=n.options.hScroll&&0>n.maxScrollX,n.vScroll=n.options.vScroll&&(!n.options.bounceLock&&!n.hScroll||n.scrollerH>n.wrapperH),n.hScrollbar=n.hScroll&&n.options.hScrollbar,n.vScrollbar=n.vScroll&&n.options.vScrollbar&&n.scrollerH>n.wrapperH,o=n._offset(n.wrapper),n.wrapperOffsetLeft=-o.left,n.wrapperOffsetTop=-o.top,"string"==typeof n.options.snap)for(n.pagesX=[],n.pagesY=[],l=n.scroller.querySelectorAll(n.options.snap),r=0,e=l.length;e>r;r++)i=n._offset(l[r]),i.left+=n.wrapperOffsetLeft,i.top+=n.wrapperOffsetTop,n.pagesX[r]=i.left<n.maxScrollX?n.maxScrollX:i.left*n.scale,n.pagesY[r]=i.top<n.maxScrollY?n.maxScrollY:i.top*n.scale;else if(n.options.snap){for(n.pagesX=[];i>=n.maxScrollX;)n.pagesX[s]=i,i-=n.wrapperW,s++;for(n.maxScrollX%n.wrapperW&&(n.pagesX[n.pagesX.length]=n.maxScrollX-n.pagesX[n.pagesX.length-1]+n.pagesX[n.pagesX.length-1]),i=0,s=0,n.pagesY=[];i>=n.maxScrollY;)n.pagesY[s]=i,i-=n.wrapperH,s++;n.maxScrollY%n.wrapperH&&(n.pagesY[n.pagesY.length]=n.maxScrollY-n.pagesY[n.pagesY.length-1]+n.pagesY[n.pagesY.length-1])}n._scrollbar("h"),n._scrollbar("v"),n.zoomed||(n.scroller.style[c]="0",n._resetPos(400))},scrollTo:function(o,r,e,t){var l,n,i=this,s=o;for(i.stop(),s.length||(s=[{x:o,y:r,time:e,relative:t}]),l=0,n=s.length;n>l;l++)s[l].relative&&(s[l].x=i.x-s[l].x,s[l].y=i.y-s[l].y),i.steps.push({x:s[l].x,y:s[l].y,time:s[l].time||0});i._startAni()},scrollToElement:function(o,r){var e,l=this;o=o.nodeType?o:l.scroller.querySelector(o),o&&(e=l._offset(o),e.left+=l.wrapperOffsetLeft,e.top+=l.wrapperOffsetTop,e.left=e.left>0?0:e.left<l.maxScrollX?l.maxScrollX:e.left,e.top=e.top>l.minScrollY?l.minScrollY:e.top<l.maxScrollY?l.maxScrollY:e.top,r=void 0===r?t.max(2*t.abs(e.left),2*t.abs(e.top)):r,l.scrollTo(e.left,e.top,r))},scrollToPage:function(o,r,e){var t,l,n=this;e=void 0===e?400:e,n.options.onScrollStart&&n.options.onScrollStart.call(n),n.options.snap?(o="next"==o?n.currPageX+1:"prev"==o?n.currPageX-1:o,r="next"==r?n.currPageY+1:"prev"==r?n.currPageY-1:r,o=0>o?0:o>n.pagesX.length-1?n.pagesX.length-1:o,r=0>r?0:r>n.pagesY.length-1?n.pagesY.length-1:r,n.currPageX=o,n.currPageY=r,t=n.pagesX[o],l=n.pagesY[r]):(t=-n.wrapperW*o,l=-n.wrapperH*r,n.maxScrollX>t&&(t=n.maxScrollX),n.maxScrollY>l&&(l=n.maxScrollY)),n.scrollTo(t,l,e)},disable:function(){this.stop(),this._resetPos(0),this.enabled=!1,this._unbind(Y,o),this._unbind(T,o),this._unbind(X,o)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind(w):z(this.aniTime),this.steps=[],this.moved=!1,this.animating=!1},zoom:function(o,r,e,t){var l=this,n=e/l.scale;l.options.useTransform&&(l.zoomed=!0,t=void 0===t?200:t,o=o-l.wrapperOffsetLeft-l.x,r=r-l.wrapperOffsetTop-l.y,l.x=o-o*n+l.x,l.y=r-r*n+l.y,l.scale=e,l.refresh(),l.x=l.x>0?0:l.x<l.maxScrollX?l.maxScrollX:l.x,l.y=l.y>l.minScrollY?l.minScrollY:l.y<l.maxScrollY?l.maxScrollY:l.y,l.scroller.style[c]=t+"ms",l.scroller.style[s]="translate("+l.x+"px,"+l.y+"px) scale("+e+")"+M,l.zoomed=!1)},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}},l=null,"undefined"!=typeof exports?exports.iScroll=P:o.iScroll=P})(window,document),angular.module("angular-momentum-scroll",[]),angular.module("angular-momentum-scroll").directive("scrollable",["$timeout","$window","$document",function(o,r,e){return{restrict:"AE",scope:{scrollToPageTime:"@",currPageX:"=",currPageY:"=",currY:"=",currX:"=",isMaxX:"=",isMinX:"=",isMaxY:"=",isMinY:"=",onRefresh:"&",onBeforeScrollStart:"&",onScrollStart:"&",onBeforeScrollMove:"&",onScrollMove:"&",parameters:"@",onBeforeScrollEnd:"&",onScrollEnd:"&",onTouchEnd:"&",onDestroy:"&",onZoomStart:"&",onZoom:"&",onZoomEnd:"&"},transclude:!0,template:'<div class="scroller" ng-transclude></div>',link:function(t,l,n){var i=".inline-flex {  display: -webkit-inline-flex;  display: -moz-inline-flex;  display: -ms-inline-flexbox;  display: -ms-inline-flex;  display: inline-flex;  display: -webkit-inline-box;  overflow: hidden;  white-space: nowrap;}.inline-flex > * {  display: block;}",s=angular.element(e[0].head);s.append('<style type="text/css">'+i+"</style>"),n.$observe("parameters",function(e){var n={};t.iscrollParameters="string"==typeof e?angular.fromJson(e):e,t.hScroll="hScroll"in t.iscrollParameters&&t.iscrollParameters.hScroll;for(var i in t)-1!==i.indexOf("on")&&t.hasOwnProperty(i)&&angular.isFunction(t[i])&&(t.iscrollParameters[i]=t[i]);if(l.css("overflow","auto"),l.css("position","relative"),t.hScroll){var s=angular.element(l.children(".scroller")[0]);s.addClass("inline-flex")}if(angular.isDefined(t.iscrollParameters)){var a=new iScroll(l[0],t.iscrollParameters);a.options.onScrollEnd=function(){o(function(){angular.isDefined(t.currPageY)&&(t.currPageY=a.currPageY),angular.isDefined(t.currPageX)&&(t.currPageX=a.currPageX),angular.isDefined(t.currY)&&(t.currY=a.y),angular.isDefined(t.currX)&&(t.currX=a.x),angular.isDefined(t.isMaxY)&&(t.isMaxY=a.y<=a.maxScrollY),angular.isDefined(t.isMinY)&&(t.isMinY=a.y>=a.minScrollY),angular.isDefined(t.isMaxX)&&(t.isMaxX=a.x>=a.maxScrollX),angular.isDefined(t.isMinX)&&(t.isMinX=a.x<=a.minScrollX)}),t.onScrollEnd({pageX:this.currPageX,pageY:this.currPageY,X:this.currX,Y:this.currY})};var c=function(o){0!==a.pagesY.length&&angular.isDefined(o)&&a.scrollToPage(0,o,t.scrollToPageTime)};t.$watch("currPageY",c);var p=function(o){0!==a.pagesX.length&&angular.isDefined(o)&&a.scrollToPage(o,0,t.scrollToPageTime)};t.$watch("currPageX",p);var u=function(o){angular.isDefined(o)&&a.scrollTo(0,o,t.scrollToPageTime)};t.$watch("currY",u);var m=function(o){angular.isDefined(o)&&a.scrollTo(o,0,t.scrollToPageTime)};t.$watch("currX",m);var h=!1;t.$watch(function(o){angular.isDefined(o)&&(a.refresh(),a.pagesX.length>0&&!h&&(p(o.currPageX),h=!0),a.pagesY.length>0&&!h&&(c(o.currPageY),h=!0))});var d="onorientationchange"in r,S=d?"orientationchange":"resize";r.addEventListener(S,function(){(n.width!==screen.width||n.height!==screen.height)&&(n={width:screen.width,height:screen.height},angular.isDefined(a)&&a.refresh())},!1),l.bind("$destroy",function(){a.destroy(),a=void 0})}})}}}]);